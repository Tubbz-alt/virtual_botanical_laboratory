<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
    </head>
    <body>
        <header>
            <h3>Prusinkiewicz and Lindenmayer (1990) <i>The Algorithmic Beauty of Plants</i> (<a
                    href="http://algorithmicbotany.org/papers/abop/abop.lowquality.pdf">pdf</a>)</h3>
            <h2>Chapter 1â€”Graphical modeling using L-systems</h2>
            <h1>Figure 1.6: Generating a quadratic Koch island (p. 8)</h1>
        </header>
        <main>
            <canvas id="canvas"></canvas>
        </main>
        <script type="module">
import {LSystem, TurtleInterpretation} from "../../../dist/web-lab.js";

const SIMPLE_LSYSTEM = `lsystem(
    alphabet: {F, f, -, +},
    axiom: F - F - F - F,
    productions: {
        F -> F - F + F + F F - F - F + F
    }
)`; 

const canvasElement = document.getElementById("canvas");
canvasElement.width = window.innerWidth;
canvasElement.height = window.innerHeight;
const canvas = canvasElement.getContext("2d");

canvas.strokeStyle = "Crimson";

const interpretation = new TurtleInterpretation(100,100,3);
const lsystem = LSystem.parse(SIMPLE_LSYSTEM);


const STEPS = 3;
for (let i = 0; i < STEPS; i++) {
    const step = lsystem.derive();
    interpretation.addVariable("x", 200);
    interpretation.addVariable("y", 300);
    interpretation.addVariable("angle", 0);

    canvas.clearRect(0, 0, canvasElement.width, canvasElement.height);
    canvas.beginPath();

    interpretation.render(canvas, step);

    canvas.closePath();
    canvas.stroke();
}
        </script>
    </body>
</html>
